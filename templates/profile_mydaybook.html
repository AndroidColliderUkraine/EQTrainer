{% extends "profile.html" %}
{% load i18n %}
{% block title %}
My daybook
{{ block.super }}
{% endblock %}


{% block content%}
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/modules/data.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/highcharts-3d.js"></script>
    <script src="https://code.highcharts.com/modules/solid-gauge.js"></script> {# For spider #}



    <script>
        $(function () {
            $('#container_1').highcharts({
                chart: {
                    polar: true,
                    type: 'column'
                },
                data: {
                    table: 'freq',
                    startRow: 1,
                    endRow: 17,
                    endColumn: 7
                },

                title: {
                    text: 'Emotions'
                },

{#                subtitle: {#}
{#                    text: 'If needed some subtitle'#}
{#                },#}

                pane: {
                    size: '85%'
                },

                legend: {
                    align: 'right',
                    verticalAlign: 'top',
                    y: 100,
                    layout: 'vertical'
                },

                xAxis: {
                    tickmarkPlacement: 'on'
                },

                yAxis: {
                    min: 0,
                    endOnTick: false,
                    showLastLabel: true,
                    title: {
                        text: 'Frequency (%)'
                    },
                    labels: {
                        formatter: function () {
                            return this.value + '%';
                        }
                    },
                    reversedStacks: false
                },

                tooltip: {
                    valueSuffix: '%'
                },

                plotOptions: {
                    series: {
                        stacking: 'normal',
                        shadow: false,
                        groupPadding: 0,
                        pointPlacement: 'on'
                    }
                }
            });
        });
{# SECOND GRAPH #}
        $(function () {

            var gaugeOptions = {

                chart: {
                    type: 'solidgauge'
                },

                title: null,

                pane: {
                    center: ['50%', '85%'],
                    size: '140%',
                    startAngle: -90,
                    endAngle: 90,
                    background: {
                        backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || '#EEE',
                        innerRadius: '60%',
                        outerRadius: '100%',
                        shape: 'arc'
                    }
                },

                tooltip: {
                    enabled: false
                },

                // the value axis
                yAxis: {
                    stops: [
                        [0.1, '#66BB6A'], // green
                        [0.5, '#388E3C'], // yellow
                        [0.9, '#1B5E20'] // red
                    ],
                    lineWidth: 0,
                    minorTickInterval: null,
                    tickPixelInterval: 400,
                    tickWidth: 0,
                    title: {
                        y: -70
                    },
                    labels: {
                        y: 16
                    }
                },

                plotOptions: {
                    solidgauge: {
                        dataLabels: {
                            y: 5,
                            borderWidth: 0,
                            useHTML: true
                        }
                    }
                }
            };

            // The speed gauge
            $('#container_2_1').highcharts(Highcharts.merge(gaugeOptions, {
                yAxis: {
                    min: 0,
                    max: 100,
                    title: {
                        text: 'Confidence'
                    }
                },

                credits: {
                    enabled: false
                },

                series: [{
                    name: 'Speed',
                    data: [Math.round({{ confidence_reports }} * 100 / {{ confidence_reports_total }})],
                    dataLabels: {
                        format: '<div style="text-align:center"><span style="font-size:25px;color:' +
                            ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y}</span><br/>' +
                               '<span style="font-size:12px;color:silver">%</span></div>'
                    },
                    tooltip: {
                        valueSuffix: ' mk/h'
                    }
                }]

            }));
            // The speed gauge
            $('#container_2_2').highcharts(Highcharts.merge(gaugeOptions, {
                yAxis: {
                    stops: [
                        [0.1, '#5C6BC0'], // green
                        [0.5, '#3949AB'], // yellow
                        [0.9, '#1A237E'] // red
                    ],
                    min: 0,
                    max: 100,
                    title: {
                        text: 'Subjective'
                    }
                },

                credits: {
                    enabled: false
                },

                series: [{
                    name: 'Speed',
                    data: [Math.round({{ subjectivity_reports }} * 100 / {{ subjectivity_reports_total}})],
                    dataLabels: {
                        format: '<div style="text-align:center"><span style="font-size:25px;color:' +
                            ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y}</span><br/>' +
                               '<span style="font-size:12px;color:silver">%</span></div>'
                    },
                    tooltip: {
                        valueSuffix: ' mk/h'
                    }
                }]

            }));
        });

{#        $(function () {#}
{#            $('#container_2_1').highcharts({#}
{#                chart: {#}
{#                    type: 'pie',#}
{#                    options3d: {#}
{#                        enabled: true,#}
{#                        alpha: 45,#}
{#                        beta: 0#}
{#                    }#}
{#                },#}
{#                title: {#}
{#                    text: 'Confidence'#}
{#                },#}
{#                tooltip: {#}
{#                    pointFormat: '<b>{point.percentage:.1f}%</b>'#}
{#                },#}
{#                plotOptions: {#}
{#                    pie: {#}
{#                        allowPointSelect: true,#}
{#                        cursor: 'pointer',#}
{#                        depth: 25,#}
{#                        dataLabels: {#}
{#                            enabled: true,#}
{#                            format: '{point.name}'#}
{#                        }#}
{#                    }#}
{#                },#}
{#                series: [{#}
{#                    type: 'pie',#}
{#                    name: 'Happiness',#}
{#                    data: [#}
{#                        ['Unconfidence', {{ confidence_reports_total }} - {{ confidence_reports }}],#}
{#                        {#}
{#                            name: 'Confidence',#}
{#                            y: {{ confidence_reports }},#}
{#                            sliced: true,#}
{#                            selected: true#}
{#                        },#}
{#                    ]#}
{#                }]#}
{#            });#}
{#        });#}

        $(function () {
            $('#container_2_3').highcharts({
                chart: {
                    type: 'pie',
                    options3d: {
                        enabled: true,
                        alpha: 60,
                        beta: 0
                    }
                },
                title: {
                    text: 'Subjectivity'
                },
                tooltip: {
                    pointFormat: '<b>{point.percentage:.1f}%</b>'
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        depth: 25,
                        dataLabels: {
                            enabled: true,
                            format: '{point.name}'
                        }
                    }
                },
                series: [{
                    type: 'pie',
                    name: 'Browser share',
                    data: [
                        ['UnSubjective', {{ subjectivity_reports_total }} - {{ subjectivity_reports }}],
                        {
                            name: 'Subjective',
                            y: {{ subjectivity_reports }},
                            sliced: true,
                            selected: true
                        }
                    ]
                }]
            });
        });

        function myFunction(name, number, text) {
{#            console.log("------------");#}
{#            console.log(name);#}
{#            console.log(number);#}
{#            console.log(tags);#}
{#            console.log(text);#}

            $('#ModelLessonHeader').text(number + '. ' + name)
            $('#ModelLessonText').text(text)
            $('#ModalLesson').modal('show')
        }
    </script>

    <div class="row" >
        <div class="col-xs-6">
            <div id="container_1" style="min-width: 420px; max-width: 600px; height: 400px; margin: 0 auto"></div>
        </div>
        <div class="col-xs-6">
            <div id="container_2_1" style="height: 200px"></div>
            <div id="container_2_2" style="height: 200px"></div>
        </div>
    </div>

<div style="display:none">
    <!-- Source: http://or.water.usgs.gov/cgi-bin/grapher/graph_windrose.pl -->
    <table id="freq" border="0" cellspacing="0" cellpadding="0">
        <tr nowrap bgcolor="#CCCCFF">
            <th colspan="{{ emotion_activity|length }}" class="hdr">Table of Frequencies (percent)</th>
        </tr>

        <tr nowrap bgcolor="#CCCCFF">
            <th class="freq">Direction</th>
            {% for key, name in user_activity %}
                <th class="freq">{{ name }}</th>
            {% endfor %}
{#            <th class="freq">&lt; 0.5 m/s</th>#}
{#            <th class="freq">0.5-2 m/s</th>#}
{#            <th class="freq">2-4 m/s</th>#}
{#            <th class="freq">4-6 m/s</th>#}
{#            <th class="freq">6-8 m/s</th>#}
{#            <th class="freq">8-10 m/s</th>#}
{#            <th class="freq">&gt; 10 m/s</th>#}
            <th class="freq">Total</th>
        </tr>
        {% for name, value in emotion_activity %}
            <tr nowrap>
                <td class="dir">{{ name }}</td>
                {% for i in value reversed %}
                    <td class="data">{{ i }}</td>
                {% endfor %}

{#                <td class="data"></td>#}
{#                <td class="data">1.78</td>#}
{#                <td class="data">0.16</td>#}
{#                <td class="data">0.50</td>#}
{#                <td class="data">0.40</td>#}
{#                <td class="data">0.30</td>#}
{#                <td class="data">1.20</td>#}
                <td class="data">1</td>
            </tr>
        {% endfor %}
{#        #}
{#        <tr nowrap>#}
{#            <td class="dir">N</td>#}
{#            <td class="data">1.81</td>#}
{#            <td class="data">1.78</td>#}
{#            <td class="data">0.16</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">3.75</td>#}
{#        </tr>#}
{#        <tr nowrap bgcolor="#DDDDDD">#}
{#            <td class="dir">NNE</td>#}
{#            <td class="data">0.62</td>#}
{#            <td class="data">1.09</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">1.71</td>#}
{#        </tr>#}
{#        <tr nowrap>#}
{#            <td class="dir">NE</td>#}
{#            <td class="data">0.82</td>#}
{#            <td class="data">0.82</td>#}
{#            <td class="data">0.07</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">1.71</td>#}
{#        </tr>#}
{#        <tr nowrap bgcolor="#DDDDDD">#}
{#            <td class="dir">ENE</td>#}
{#            <td class="data">0.59</td>#}
{#            <td class="data">1.22</td>#}
{#            <td class="data">0.07</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">1.88</td>#}
{#        </tr>#}
{#        <tr nowrap>#}
{#            <td class="dir">E</td>#}
{#            <td class="data">0.62</td>#}
{#            <td class="data">2.20</td>#}
{#            <td class="data">0.49</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">3.32</td>#}
{#        </tr>#}
{#        <tr nowrap bgcolor="#DDDDDD">#}
{#            <td class="dir">ESE</td>#}
{#            <td class="data">1.22</td>#}
{#            <td class="data">2.01</td>#}
{#            <td class="data">1.55</td>#}
{#            <td class="data">0.30</td>#}
{#            <td class="data">0.13</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">5.20</td>#}
{#        </tr>#}
{#        <tr nowrap>#}
{#            <td class="dir">SE</td>#}
{#            <td class="data">1.61</td>#}
{#            <td class="data">3.06</td>#}
{#            <td class="data">2.37</td>#}
{#            <td class="data">2.14</td>#}
{#            <td class="data">1.74</td>#}
{#            <td class="data">0.39</td>#}
{#            <td class="data">0.13</td>#}
{#            <td class="data">11.45</td>#}
{#        </tr>#}
{#        <tr nowrap bgcolor="#DDDDDD">#}
{#            <td class="dir">SSE</td>#}
{#            <td class="data">2.04</td>#}
{#            <td class="data">3.42</td>#}
{#            <td class="data">1.97</td>#}
{#            <td class="data">0.86</td>#}
{#            <td class="data">0.53</td>#}
{#            <td class="data">0.49</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">9.31</td>#}
{#        </tr>#}
{#        <tr nowrap>#}
{#            <td class="dir">S</td>#}
{#            <td class="data">2.66</td>#}
{#            <td class="data">4.74</td>#}
{#            <td class="data">0.43</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">7.83</td>#}
{#        </tr>#}
{#        <tr nowrap bgcolor="#DDDDDD">#}
{#            <td class="dir">SSW</td>#}
{#            <td class="data">2.96</td>#}
{#            <td class="data">4.14</td>#}
{#            <td class="data">0.26</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">7.37</td>#}
{#        </tr>#}
{#        <tr nowrap>#}
{#            <td class="dir">SW</td>#}
{#            <td class="data">2.53</td>#}
{#            <td class="data">4.01</td>#}
{#            <td class="data">1.22</td>#}
{#            <td class="data">0.49</td>#}
{#            <td class="data">0.13</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">8.39</td>#}
{#        </tr>#}
{#        <tr nowrap bgcolor="#DDDDDD">#}
{#            <td class="dir">WSW</td>#}
{#            <td class="data">1.97</td>#}
{#            <td class="data">2.66</td>#}
{#            <td class="data">1.97</td>#}
{#            <td class="data">0.79</td>#}
{#            <td class="data">0.30</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">7.70</td>#}
{#        </tr>#}
{#        <tr nowrap>#}
{#            <td class="dir">W</td>#}
{#            <td class="data">1.64</td>#}
{#            <td class="data">1.71</td>#}
{#            <td class="data">0.92</td>#}
{#            <td class="data">1.45</td>#}
{#            <td class="data">0.26</td>#}
{#            <td class="data">0.10</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">6.09</td>#}
{#        </tr>#}
{#        <tr nowrap bgcolor="#DDDDDD">#}
{#            <td class="dir">WNW</td>#}
{#            <td class="data">1.32</td>#}
{#            <td class="data">2.40</td>#}
{#            <td class="data">0.99</td>#}
{#            <td class="data">1.61</td>#}
{#            <td class="data">0.33</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">0.00</td>#}
{#            <td class="data">6.64</td>#}
{#        </tr>#}
{#        <tr nowrap>#}
{#            <td class="dir">NW</td>#}
{#            <td class="data">1.58</td>#}
{#            <td class="data">4.28</td>#}
{#            <td class="data">1.28</td>#}
{#            <td class="data">0.76</td>#}
{#            <td class="data">0.66</td>#}
{#            <td class="data">0.69</td>#}
{#            <td class="data">0.03</td>#}
{#            <td class="data">9.28</td>#}
{#        </tr>#}
{#        <tr nowrap bgcolor="#DDDDDD">#}
{#            <td class="dir">NNW</td>#}
{#            <td class="data">1.51</td>#}
{#            <td class="data">5.00</td>#}
{#            <td class="data">1.32</td>#}
{#            <td class="data">0.13</td>#}
{#            <td class="data">0.23</td>#}
{#            <td class="data">0.13</td>#}
{#            <td class="data">0.07</td>#}
{#            <td class="data">8.39</td>#}
{#        </tr>#}
{#        <tr nowrap>#}
{#            <td class="totals">Total</td>#}
{#            <td class="totals">25.53</td>#}
{#            <td class="totals">44.54</td>#}
{#            <td class="totals">15.07</td>#}
{#            <td class="totals">8.52</td>#}
{#            <td class="totals">4.31</td>#}
{#            <td class="totals">1.81</td>#}
{#            <td class="totals">0.23</td>#}
{#            <td class="totals">&nbsp;</td>#}
{#        </tr>#}
    </table>
</div>

    <br>
    <br>

    {{ user_course.course.name }} My history
    <br>
    <br>
<div class="panel panel-info">
    <div class="panel-heading">Weekly reports</div>
{#        <div class="panel-body">12345789</div>#}
        <ul class="list-group">
            {% for weekly_report in weekly_reports%}
                <a type="button" onclick="myFunction('{{ weekly_report }}', '{{ forloop.counter }}', '{{ weekly_report.text }}')" class="list-group-item">
                    {{ forloop.counter }}. {{ weekly_report }}
                    <span class="pull-right">Date: {{ weekly_report.updated }}</span>
                </a>
            {% endfor %}
        </ul>
</div>

<div class="panel panel-info">
    <div class="panel-heading">Monthly reports</div>
{#        <div class="panel-body">12345789</div>#}
        <ul class="list-group">
            {% for monthly_report in monthly_reports%}
                <a type="button" onclick="myFunction('{{ monthly_report }}', '{{ forloop.counter }}', '{{ monthly_report.text }}')" class="list-group-item">
                    {{ forloop.counter }}. {{ monthly_report }}
                    <span class="pull-right">Date: {{ monthly_report.updated }}</span>
                </a>
            {% endfor %}
        </ul>
</div>




      <!-- Modal -->
<div class="modal fade" id="ModalLesson" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 id="ModelLessonHeader" class="modal-title">Modal Header</h4>
            </div>
            <div id="ModelLessonText" class="modal-body">
                <p>Some text in the modal.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


{% endblock %}